<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Anti-pattern: Old generation - IaC Cost Patterns</title>
    <link rel="stylesheet" href="https://search-rug.github.io/iac-cost-patterns/style.css?h=5fbb990736b9853735d4">
</head>
<body>
    <header>
        <div class="content-wrapper">
            <h1><a href="https:&#x2F;&#x2F;search-rug.github.io&#x2F;iac-cost-patterns&#x2F;">IaC Cost Patterns</a></h1>
            <p>A collection of patterns and antipatterns for managing cost in IaC files.</p>
            <ul>
                <li><a href="https://github.com/search-rug/iac-cost-patterns/blob/main/patterns.yml">Dataset <span class="label">YAML</span></a></li>
                <li><a href="https://github.com/search-rug/iac-cost-patterns">Repository</a></li>
            </ul>
        </div>
    </header>
    <main>
        <div class="content-wrapper">
            
<p class="nav"><a href="https:&#x2F;&#x2F;search-rug.github.io&#x2F;iac-cost-patterns&#x2F;">&leftarrow; Back to all patterns</a></p>
<h1 id="anti-pattern-old-generation">Anti-pattern: Old generation</h1>
<p>Using newer resource generations gives similar performance for lower cost.</p>
<h2 id="context">Context</h2>
<p>Cloud providers occasionally update their offerings to support, for example,
newer CPU generations. These newer generations are often more efficient, making
them a more economical option compared to older generations.</p>
<h2 id="solution">Solution</h2>
<p>Upgrade resources to newer generations to attain comparable or better performance
for a lower price. The most commonly replaced resources include, but are not limited
to, AWS's t2 general-purpose compute instances and gp2 storage volumes.</p>
<h2 id="example">Example</h2>
<p>Switch from gp2 to gp3 storage, providing comparable performance but lower cost:</p>
<pre data-lang="diff" style="background-color:#2b303b;color:#c0c5ce;" class="language-diff "><code class="language-diff" data-lang="diff"><span>@@ -1,7 +1,7 @@
</span><span> resource &quot;aws_instance&quot; &quot;example&quot; {
</span><span>   # ...
</span><span>   root_block_device {
</span><span style="color:#bf616a;">-    volume_type = &quot;gp2&quot;
</span><span style="color:#a3be8c;">+    volume_type = &quot;gp3&quot;
</span><span>     # ...
</span><span>   }
</span><span> }
</span></code></pre>
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.aws.amazon.com/ebs/latest/userguide/ebs-volume-types.html">Amazon EBS volume types</a></li>
<li><a href="https://aws.amazon.com/blogs/storage/migrate-your-amazon-ebs-volumes-from-gp2-to-gp3-and-save-up-to-20-on-costs/">Migrate your Amazon EBS volumes from gp2 to gp3 and save up to 20% on costs</a></li>
<li><a href="https://aws.amazon.com/ec2/instance-types/">Compute - EC2 Instance Types - AWS</a></li>
<li><a href="https://aws.amazon.com/ec2/instance-types/t2/">Amazon EC2 T2 Instances - Amazon Web Services (AWS)</a></li>
<li><a href="https://aws.amazon.com/ec2/instance-types/t3/">Amazon EC2 T3 Instances - Amazon Web Services (AWS)</a></li>
</ul>
<h2 id="occurrences">Occurrences</h2>
<ul>
<li><a href="https://github.com/gudlyf/TerraformOpenVPN/commit/be1245d8634025277ba79a4155ee88d7eaffcdfb">https://github.com/gudlyf/TerraformOpenVPN/commit/be1245d8634025277ba79a4155ee88d7eaffcdfb</a></li>
<li><a href="https://github.com/alphagov/govuk-aws/commit/6cfda6ada5137b232ff442ae9f2aedc8520ee1b4">https://github.com/alphagov/govuk-aws/commit/6cfda6ada5137b232ff442ae9f2aedc8520ee1b4</a></li>
<li><a href="https://github.com/alphagov/govuk-aws/commit/aeb3bfbe393cdfc02e62b812843ed75cf5f245e4">https://github.com/alphagov/govuk-aws/commit/aeb3bfbe393cdfc02e62b812843ed75cf5f245e4</a></li>
<li><a href="https://github.com/alphagov/govuk-aws/commit/5fa5da9756f12559b490217dd5b173db48e7f2a9">https://github.com/alphagov/govuk-aws/commit/5fa5da9756f12559b490217dd5b173db48e7f2a9</a></li>
<li><a href="https://github.com/alphagov/govuk-aws/commit/19d187e4a29147cbcf1cfae456cfcbfa8ad52b45">https://github.com/alphagov/govuk-aws/commit/19d187e4a29147cbcf1cfae456cfcbfa8ad52b45</a></li>
<li><a href="https://github.com/alphagov/govuk-aws/commit/806b1a2a47f2f4e580e524b2cf8cc5928749d972">https://github.com/alphagov/govuk-aws/commit/806b1a2a47f2f4e580e524b2cf8cc5928749d972</a></li>
<li><a href="https://github.com/alphagov/govuk-aws/commit/8d7d2ebe0dbe9ebf8009572d1d710c4700cf245e">https://github.com/alphagov/govuk-aws/commit/8d7d2ebe0dbe9ebf8009572d1d710c4700cf245e</a></li>
<li><a href="https://github.com/greenbrian/musical-spork/commit/24c07bfd5c31438fff6374e9ba3d577e6402d777">https://github.com/greenbrian/musical-spork/commit/24c07bfd5c31438fff6374e9ba3d577e6402d777</a></li>
<li><a href="https://github.com/dotancohen81/Rancher/commit/90944271b4e8bd46e3d42ac64bc4964a33a8fdc3">https://github.com/dotancohen81/Rancher/commit/90944271b4e8bd46e3d42ac64bc4964a33a8fdc3</a></li>
<li><a href="https://github.com/cisagov/cyhy_amis/commit/7b8d9247a679295e0e1791b13d6c437c473e44b8">https://github.com/cisagov/cyhy_amis/commit/7b8d9247a679295e0e1791b13d6c437c473e44b8</a></li>
<li><a href="https://github.com/yardbirdsax/elasticsearch-the-hard-way/commit/521bae59a4002a616eac44c1681ca5066bbd00c8">https://github.com/yardbirdsax/elasticsearch-the-hard-way/commit/521bae59a4002a616eac44c1681ca5066bbd00c8</a></li>
<li><a href="https://github.com/GBergeret/tf-vpc-module/commit/34d80ece7d0ef598414baffceb074c6580dd819b">https://github.com/GBergeret/tf-vpc-module/commit/34d80ece7d0ef598414baffceb074c6580dd819b</a></li>
<li><a href="https://github.com/cisagov/vulnerable-instances/commit/f70410061b8c6b9249895571e05dfb7a142efb18">https://github.com/cisagov/vulnerable-instances/commit/f70410061b8c6b9249895571e05dfb7a142efb18</a></li>
<li><a href="https://github.com/dwp/dataworks-aws-data-egress/commit/14f065e5161fee14c286c34df7db9f5516ef9bb6">https://github.com/dwp/dataworks-aws-data-egress/commit/14f065e5161fee14c286c34df7db9f5516ef9bb6</a></li>
<li><a href="https://github.com/circleci/enterprise-setup/commit/26cc5295c2bb9d8756e450712e0f5f75af440c4a">https://github.com/circleci/enterprise-setup/commit/26cc5295c2bb9d8756e450712e0f5f75af440c4a</a></li>
<li><a href="https://github.com/bh1m2rn/gitlab-environment-toolkit/commit/b9750f0bb88bc22256085b6bc8f060055e90a8c4">https://github.com/bh1m2rn/gitlab-environment-toolkit/commit/b9750f0bb88bc22256085b6bc8f060055e90a8c4</a></li>
<li><a href="https://github.com/travis-ci/terraform-config/commit/4f641b162fa877aef842481631906d5bfe874781">https://github.com/travis-ci/terraform-config/commit/4f641b162fa877aef842481631906d5bfe874781</a></li>
<li><a href="https://github.com/byu-oit/terraform-aws-rds/commit/86a0795540edb426c3226775d73fcd4ce807d36a">https://github.com/byu-oit/terraform-aws-rds/commit/86a0795540edb426c3226775d73fcd4ce807d36a</a></li>
<li><a href="https://github.com/poseidon/terraform-azure-kubernetes/commit/633eb938742a43be09612b944c29aaaf70dac119">https://github.com/poseidon/terraform-azure-kubernetes/commit/633eb938742a43be09612b944c29aaaf70dac119</a></li>
<li><a href="https://github.com/poseidon/terraform-aws-kubernetes/commit/e09126b45746f1c967d1990fa04ce781a0478c6d">https://github.com/poseidon/terraform-aws-kubernetes/commit/e09126b45746f1c967d1990fa04ce781a0478c6d</a></li>
<li><a href="https://github.com/deadlysyn/terraform-keycloak-aws/commit/1c982ac4120ae3ed5a88c38f2a4d568ad9a83d22">https://github.com/deadlysyn/terraform-keycloak-aws/commit/1c982ac4120ae3ed5a88c38f2a4d568ad9a83d22</a></li>
<li><a href="https://github.com/ONSdigital/eq-terraform/commit/79845fe095cd87287346f40d2adce9b28a32ef35">https://github.com/ONSdigital/eq-terraform/commit/79845fe095cd87287346f40d2adce9b28a32ef35</a></li>
<li><a href="https://github.com/kinvolk-archives/lokomotive-kubernetes/commit/f2f4deb8bb44988eeb0b64b919e51fb556aef4fb">https://github.com/kinvolk-archives/lokomotive-kubernetes/commit/f2f4deb8bb44988eeb0b64b919e51fb556aef4fb</a></li>
<li><a href="https://github.com/smarman85/a_new_hope/commit/de97a6b8033c866c3b711468207aa4890049daaa">https://github.com/smarman85/a_new_hope/commit/de97a6b8033c866c3b711468207aa4890049daaa</a></li>
<li><a href="https://github.com/kmishra9/PL2-AWS-Setup/commit/0d7b5b0f6f92ff6cfde1f17ad96d1b1459a0957a">https://github.com/kmishra9/PL2-AWS-Setup/commit/0d7b5b0f6f92ff6cfde1f17ad96d1b1459a0957a</a></li>
<li><a href="https://github.com/cisagov/cool-sharedservices-nessus/commit/5403a8978053a1299b0afe8d7fc59e914fc5e354">https://github.com/cisagov/cool-sharedservices-nessus/commit/5403a8978053a1299b0afe8d7fc59e914fc5e354</a></li>
<li><a href="https://github.com/guillaumekh/wg-terraform-template/commit/effee9cbc473af5d07cfc3aacece50aa6e59753a">https://github.com/guillaumekh/wg-terraform-template/commit/effee9cbc473af5d07cfc3aacece50aa6e59753a</a></li>
<li><a href="https://github.com/ninthnails/terraform-aws-camellia/commit/0019704e14723aaf326840ab36c594c3f514a2d4">https://github.com/ninthnails/terraform-aws-camellia/commit/0019704e14723aaf326840ab36c594c3f514a2d4</a></li>
<li><a href="https://github.com/openaustralia/infrastructure/commit/63ee190c0ae1832bb72681e1e4b1b14a9367b4bb">https://github.com/openaustralia/infrastructure/commit/63ee190c0ae1832bb72681e1e4b1b14a9367b4bb</a></li>
<li><a href="https://github.com/robertdebock/terraform-aws-vault/commit/e3b6520960a88aacbf03339dc1368f680a8bee9a">https://github.com/robertdebock/terraform-aws-vault/commit/e3b6520960a88aacbf03339dc1368f680a8bee9a</a></li>
<li><a href="https://github.com/cisagov/cool-assessment-terraform/commit/3138943ab4d15cc256d322e1128862ef11383c73">https://github.com/cisagov/cool-assessment-terraform/commit/3138943ab4d15cc256d322e1128862ef11383c73</a></li>
<li><a href="https://github.com/pelias/terraform-elasticsearch/commit/21c1827f4507eae217d43d99ad8cb1bbb1337e21">https://github.com/pelias/terraform-elasticsearch/commit/21c1827f4507eae217d43d99ad8cb1bbb1337e21</a></li>
<li><a href="https://github.com/lowflying/OVPN---TF/commit/be1245d8634025277ba79a4155ee88d7eaffcdfb">https://github.com/lowflying/OVPN---TF/commit/be1245d8634025277ba79a4155ee88d7eaffcdfb</a></li>
<li><a href="https://github.com/figurate/bedrock/commit/bffc023eeff075ef281b1fd261897f4c7216b354">https://github.com/figurate/bedrock/commit/bffc023eeff075ef281b1fd261897f4c7216b354</a></li>
</ul>


        </div>
    </main>
    <footer>
        <div class="content-wrapper">
            <p>
                &copy; 2024
                <a href="https://koen.bolhu.is">Koen Bolhuis</a>,
                <a href="https://feitosa-daniel.github.io">Daniel Feitosa</a>,
                <a href="https://vandriko.github.io">Vasilios Andrikopoulos</a>
            </p>
        </div>
    </footer>
</body>
</html>
